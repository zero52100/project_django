{% extends 'core/base.html' %}

{% block content %}
    <div class="container">
        <div class="columns">
            <div class="column is-6 is-offset-3">
                <h1 class="title">Sign up</h1>
                <form method="post" action=".">
                    {% csrf_token %}
                    {{ form.non_field_errors }}
                    
                    <!-- User Type -->
                    <div class="field">
                        <label class="label">User Type</label>
                        <div class="control">
                            <div class="select">
                                <select name="account_type" id="account_type">
                                    <option value="jobseeker" selected>Job Seeker</option>
                                    <option value="employer">Employer/Recruiter</option>
                                    <option value="admin">Admin</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Standard Registration Fields -->
                    <div class="field">
                        <label class="label">Full Name</label>
                        <div class="control">
                            <input class="input" type="text" name="full_name" required>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Username</label>
                        <div class="control">
                            <input class="input" type="text" name="username" required>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Email</label>
                        <div class="control">
                            <input class="input" type="email" name="email" required>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Password</label>
                        <div class="control">
                            <input class="input" type="password" name="password1" required>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Confirm Password</label>
                        <div class="control">
                            <input class="input" type="password" name="password2" required>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Gender</label>
                        <div class="control">
                            <div class="select">
                                <select name="gender">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Fields for Employer -->
                    <div id="employer_fields" style="display: none;">
                        <div class="field">
                            <label class="label">Company Name</label>
                            <div class="control">
                                <input class="input" type="text" name="company_name">
                            </div>
                        </div>

                        <div class="field">
                            <label class="label">Designation</label>
                            <div class="control">
                                <div class="select">
                                    <select name="designation">
                                        <option value="hr">HR</option>
                                        <option value="ceo">CEO</option>
                                        <option value="manager">Manager</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Fields for Admin -->
                    <div id="admin_fields" style="display: none;">
                        <div class="field">
                            <label class="label">Admin Code</label>
                            <div class="control">
                                <input class="input" type="password" name="admin_code" required>
                            </div>
                        </div>
                    </div>

                    <div class="field">
                        <div class="control">
                            <button class="button is-success">Sign up</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('account_type').addEventListener('change', function() {
            var employerFields = document.getElementById('employer_fields');
            var adminFields = document.getElementById('admin_fields');
            if (this.value === 'employer') {
                employerFields.style.display = 'block';
                adminFields.style.display = 'none';
            } else if (this.value === 'admin') {
                adminFields.style.display = 'block';
                employerFields.style.display = 'none';
            } else {
                employerFields.style.display = 'none';
                adminFields.style.display = 'none';
            }
        });
    </script>
{% endblock %}
